\documentclass[a4paper, 12pt]{article}
\usepackage[italian]{babel}
\usepackage[table]{xcolor}
\usepackage{xstring, xltabular, multirow, ifthen, hyphenat, svg, tcolorbox}
\usepackage[
	colorlinks = true,
	linkcolor=black,
	urlcolor=black,
	citecolor=black
]{hyperref}
\usepackage{enumitem}


\hypersetup{linkcolor=black}

% Titolo del documento e informazioni sul lavoro
\title{
    \Large EasyLibrary\\
    \vspace{1mm}
    \Huge Specifica dei Requisiti del Software
}
% Metodo per centrare correttamente con wrapping i nomi.
\author{
    \textbf{Gruppo 18}\\
    Francesco Cangianiello\\
    Andrea Ciliberti\\
    Serena Giannitti\\
    Marco Giraulo
}

\begin{document}

\maketitle

\newpage
\tableofcontents

\newpage
\section{Requisiti di Progetto}
\subsection{Lista dei Requisiti}

% Scope della tabella dei requisiti
{
	\input{requisites_table}
}

\newpage

\input{requisites_form}

\subsection{Specifica dei Requisiti}
\hypertarget{IF}{\subsubsection{Funzionalità individuali}}
\requisitebox{IF-1.1}{Registrazione di un nuovo utente}{Il sistema permette la registrazione di un nuovo utente tramite inserimento dei seguenti dati obbligatori: nome, cognome, matricola ed e-mail istituzionale.}{Nome, cognome, matricola, e-mail istituzionale}{Nessuno.}{L’archivio del sistema è correttamente caricato in memoria. Le informazioni sull’utente devono corrispondere alle specifiche del requisito DF-1.1.}{Il nuovo utente viene aggiunto all’elenco degli utenti registrati.}{Alta}
\requisitebox{IF-1.2}{Modifica dei dati di un utente}{Il sistema permette di modificare le generalità fornite dall’utente. Tutte le generalità possono essere modificate (campi DF-1.1 eccetto i prestiti attivi), tuttavia la nuova matricola o il nuovo indirizzo e-mail non possono duplicare valori già associati ad altri utenti nel sistema. Se le nuove generalità non sono valide e univoche il sistema deve impedire il salvataggio delle modifiche e deve fornire un messaggio di errore esplicativo. }{Nuovi valori dei campi dell'utente.}{Nessuno.}{L’archivio del sistema è correttamente caricato in memoria.}{L'utente selezionato viene aggiornato, e le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{IF-1.3}{Rimozione di un utente}{Il sistema permette la cancellazione di un utente registrato, purché non abbia prestiti attivi associati al proprio profilo. Se invece l’utente possiede uno o più prestiti attivi, il sistema impedirà la cancellazione.}{Matricola associata all’utente da rimuovere.}{Nessuno.}{L’archivio del sistema è correttamente caricato in memoria.Il profilo dell’utente è presente nel sistema.}{L'utente selezionato è rimosso dall'archivio, e le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{IF-1.4}{Ricerca di un utente}{Il sistema permette la ricerca di utenti tramite 2 modalità: per cognome o per matricola. Il sistema restituisce tutti gli utenti che soddisfano il criterio di ricerca. Se non esistono nell’archivio del sistema utenti che corrispondono ai criteri di ricerca, sarà restituita una lista vuota di utenti.}{Criteri di ricerca (cognome, matricola).}{Utenti corrispondenti ai criteri di ricerca.}{L’archivio del sistema è correttamente caricato in memoria. Il criterio di ricerca è valido.}{Nessuna.}{Alta}
\requisitebox{IF-2.1}{Inserimento di un nuovo libro}{Il sistema permette di aggiungere un nuovo libro all’archivio, inserendo i seguenti campi per la sua rappresentazione (DF-1.2). L’inserimento deve essere possibile solo se l’ISBN non è già presente nel sistema e se il numero di copie disponibili è maggiore o uguale a 0.}{Titolo, autore (nome e cognome), anno di pubblicazione, codice identificativo (ISBN), numero di copie disponibili.}{Nessuno.}{L’archivio del sistema è correttamente caricato in memoria.}{Il libro è aggiunto all’archivio ed è disponibile per la consultazione e il prestito.}{Alta}
\requisitebox{IF-2.2}{Modifica dei dati relativi ad un libro}{Il sistema permette di modificare i dati relativi ad un libro nel sistema. Si possono modificare le informazioni di: titolo, autore, anno di pubblicazione e ISBN. Le modifiche devono mantenere la coerenza dei dati, per cui l’ISBN non può presentare duplicati nell'archivio del sistema.}{Nuovi dati relativi al libro (DF-1.2).}{Nessuno.}{L’archivio del sistema è correttamente caricato in memoria. Il libro è presente nel sistema.}{I dati del libro risultano aggiornati secondo le modifiche specificate, e le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{IF-2.3}{Rimozione di un libro}{Il sistema deve permettere di eliminare un libro dall’archivio, ma solo se non esistono prestiti attivi associati a quel titolo. In caso contrario, il sistema impedirà la cancellazione.}{Dati relativi al libro presente nel sistema.}{Nessuno.}{Il libro deve essere presente nell’archivio del sistema.}{Il libro è rimosso dall'archivio, e le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{IF-2.4}{Ricerca di un libro}{Il gestore deve poter cercare libri secondo tre modalità: per titolo, per autore, per ISBN (codice univoco). Il sistema deve restituire tutti i libri che soddisfano il criterio di ricerca. Se non esistono nell’archivio del sistema libri che corrispondono ai criteri di ricerca, sarà restituita una lista vuota di libri.}{Criterio di ricerca (Titolo, autore o ISBN del libro).}{Elenco dei libri corrispondenti ai criteri della ricerca.}{Il criterio di ricerca è valido.}{Nessuna.}{Alta}

\hypertarget{BF}{\subsubsection{Business Flow}}
\requisitebox{BF-1.1}{Registrazione di un nuovo prestito}{Il gestore registra il prestito di un libro da parte di un utente. Un prestito può essere registrato solo se:
	\begin{itemize}
		\setlength\itemsep{0.1mm}
		\item{il libro ha almeno una copia disponibile;}
		\item{l’utente ha meno di tre prestiti attivi.}
	\end{itemize}
	Se una o più delle condizioni sopra indicate non risultano soddisfatte, il gestore sarà notificato di quali condizioni non siano rispettate e non potrà confermare l’operazione.
	Al termine della registrazione, il sistema deve decrementare il numero di copie disponibili del libro e inserire le informazioni del prestito nell’archivio (DF-1.3). È possibile per un utente prendere in prestito più di una singola copia del medesimo libro.}{Dati relativi all’utente e ai libri di cui si vuole effettuare il prestito.}{Nessuno.}{L’utente è correttamente registrato nel sistema. Il libro da prestare è correttamente registrato nel sistema. L’utente richiede il prestito di un nuovo libro.}{Il numero di copie disponibili del libro è decrementato. Il prestito viene aggiunto alla lista dei prestiti attivi dell’utente. Le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{BF-1.2}{Restituzione di un libro}{Il gestore registra la restituzione di un libro da parte di un utente. Il gestore ricerca il prestito corrispondente all’interno del sistema e lo segna come saldato per poi segnare come disponibile la copia del libro. Se tale prestito era già contrassegnato come saldato, il sistema non compierà operazioni aggiuntive.}{Dati del libro da restituire e dell’utente che effettua la restituzione.}{Nessuno.}{Il prestito deve essere attivo.}{Il prestito viene segnalato come saldato. La copia del libro viene resa disponibile per nuovi prestiti. Le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}

\hypertarget{DF}{\subsubsection{Esigenze Dati}}
\requisiteboxsimple{DF-1.1}{Informazioni sull’Utente}{Un utente deve essere rappresentato tramite i seguenti dati: nome, cognome, matricola univoca (stringa di 10 cifre numeriche), e-mail istituzionale univoca (formattata per standard RFC 5322, terminante nel campo di dominio con “.unisa.it”), lista di prestiti (DF-1.3) attualemente attivi a carico dell’utente, che non possono essere più di 3.}{Alta}
\requisiteboxsimple{DF-1.2}{Informazioni sul Libro}{Un libro è rappresentato tramite le informazioni di titolo, lista di autori (unica stringa testuale con nome e cognome degli autori separati da virgole), data di pubblicazione (precedente o corrispondente alla data attuale, composta dai campi di giorno, mese ed anno), codice identificativo univoco ISBN (per standard ISO 2108) e numero di copie disponibili nell’archivio (maggiore o uguale a 0).}{Alta}
\requisiteboxsimple{DF-1.3}{Informazioni sul Prestito}{Un prestito è rappresentato tramite le informazioni di utente a carico (DF-1.1), di libro preso in prestito (DF-1.2), di data prevista di restituzione del prestito, e di un indicatore che ne indica lo stato tra "attivo" o "saldato".}{Alta}
\requisitebox{DF-2.1}{Salvataggio dei dati dell’archivio su file}{Ogni componente dell’archivio (libri, utenti, prestiti) deve essere salvato su un file locale univocamente associato. Il salvataggio deve avvenire:
	\begin{itemize}
		\setlength\itemsep{0.1mm}
		\item{Su richiesta dell’utente.}
		\item{Automaticamente alla chiusura dell’applicazione.}
	\end{itemize}\leavevmode}{Dati di archivio da salvare (quali l’insieme di studenti, libri e prestiti annessi). I nomi dei file su cui devono essere salvati.}{File su sistema contenente i dati relativi all’archivio (archivio di utenti, libri e prestiti). Il modo in cui sono archiviati i file dipende dal requisito RNF-2.2.}{Nessuno.}{Nessuno.}{Alta}
\requisitebox{DF-2.2}{Caricamento da file dell’archivio}{Il sistema carica nelle proprie collezioni corrispondenti i libri, utenti e i prestiti presenti nei file di appoggio secondo la serializzazione utilizzata (RNF-2.2).}{Nomi dei file su cui salvare l’archivio.}{Strutture dati dell’archivio.}{File di appoggio presenti e coerenti.}{La memoria del sistema è popolata dalle informazioni presenti nel file di appoggio.}{Alta}

\hypertarget{UI}{\subsubsection{Interfaccia Utente}}
\requisiteboxsimple{UI-1.1}{Menù principale dell’applicativo}{Landing page con menù di opzioni per accedere alle diverse funzionalità del sistema, aperto di default all’avvio del programma grafico. Il menù contiene informazioni generali sull'applicativo, come il nome del sistema e la sua versione, e diversi collegamenti per visualizzare i vari elenchi di informazioni, quali uno per visualizzare la lista degli utenti (UI-2.1), dei libri (UI-3.1), e dei prestiti attivi (UI-4.1).}{Alta}
\requisiteboxsimple{UI-1.2}{Menu Bar persistente}{Barra di menù persistente nella vista principale del programma. Contiene interazioni per:
	\begin{itemize}
		\setlength\itemsep{0.1mm}
		\item{Salvare lo stato dell’archivio (nei file utilizzati correntemente, DF-2.1).}
		\item{Caricare l’archivio da un file specifico (DF-2.1).}
		\item{Esportare l’archivio in un insieme di file specifico (DF-2.2).}
		\item{Uscire dal programma.}
	\end{itemize}
	All’azionamento dei pulsanti inclusi la vista attuale dell’applicativo sarà aggiornata a seconda dei dati e delle informazioni caricate in memoria.
}{Alta}
\requisiteboxsimple{UI-2.1}{Visualizzazione dell’elenco degli utenti}{Elenco grafico degli utenti registrati nell’archivio della biblioteca. La vista mostra le informazioni sugli utenti registrati nell’archivio della biblioteca includendo le loro informazioni (DF-1.1), ordinati alfabeticamente per cognome e, a parità di cognome, per nome, in una tabella, eccetto per la lista di libri attualmente in prestito per ogni utente che sarà mostrata non direttamente ma tramite un collegamento con cui interagire. Il sistema permette di modificare le informazioni relative all’utente direttamente dall'interfaccia utente, interagendo con la visualizzazione dei dati (IF-1.2). Il sistema permette di filtrare la lista degli utenti tramite campi di cognome e matricola su richiesta (IF-1.4). Il sistema permette di aggiungere utenti alla lista (UI-2.2) e di rimuovere l’utente selezionato (IF-1.3) su richiesta. Dopo ogni operazione, la vista dell'elenco dovrà rispecchiare le modifiche apportate.}{Alta}
\requisiteboxsimple{UI-2.2}{Visualizzazione per la registrazione di un nuovo utente}{Vista per l’inserimento dei dati per la registrazione di un nuovo utente. Il sistema permette l'inserimento delle informazioni necessarie (DF-1.1, eccetto la lista di libri in prestito), un interazione per confermare l'operazione di registrazione al termine della compilazione delle informazioni (disponibile solo se le informazioni fornite in input rispettano le precondizioni del requisito IF-1.1) e un interazione per annullare la registrazione del nuovo utente. La schermata per l'inserimento dell’utente viene chiusa al termine dell’operazione. Se la schermata viene chiusa con conferma della modifica da apportare, i dati relativi al nuovo utente saranno registrati nell’archivio.}{Alta}
\requisiteboxsimple{UI-3.1}{Visualizzazione dell’elenco dei libri}{Elenco grafico dei libri presenti nell’archivio della biblioteca. La vista mostra le informazioni sui libri presenti nell’archivio della biblioteca includendo le loro informazioni (DF-1.2), ordinati alfabeticamente per titolo, in una tabella. Il sistema permette di modificare le informazioni relative al libro direttamente dall'interfaccia utente, interagendo con la visualizzazione dei dati (IF-2.2). Il sistema permette di filtrare la lista dei libri tramite campi di titolo, autore e codice ISBN su richiesta (IF-2.4). Il sistema permette di aggiungere libri alla lista (UI-3.2), e di rimuovere il libro selezionato (IF-2.3) su richiesta. Dopo ogni operazione, la vista dell'elenco dovrà rispecchiare le modifiche apportate.}{Alta}
\requisiteboxsimple{UI-3.2}{Visualizzazione per la registrazione di un nuovo libro}{Vista per l’inserimento dei dati per la registrazione di un nuovo libro. Il sistema permette l'inserimento delle informazioni necessarie (DF-1.2), un interazione per confermare l'operazione di registrazione al termine della compilazione delle informazioni (disponibile solo se le informazioni in input rispettano le precondizioni del requisito IF-2.1) e un interazione per annullare la registrazione del nuovo libro. La schermata per l'inserimento del libro viene chiusa al termine dell’operazione. Se la schermata viene chiusa con conferma della modifica da apportare, i dati relativi al nuovo libro saranno registrati nell’archivio.}{Alta}
\requisiteboxsimple{UI-4.1}{Visualizzazione dei prestiti attivi}{Elenco grafico dei prestiti attivi registrati nell’archivio della biblioteca. La vista mostra le informazioni sui prestiti registrati nell’archivio della biblioteca,  includendo le loro informazioni (DF-1.3), ordinati in ordine crescente per data prevista di restituzione, in una tabella. Il sistema evidenzierà i prestiti attivi la cui data prevista di restituzione è precendente alla data di visualizzazione. Il sistema permette di filtrare la lista dei prestiti per visualizzare solo i prestiti attivi o anche quelli saldati. Il sistema permette di registrare un nuovo prestito (UI-4.2), e di segnare come saldato il prestito selezionato (BF-1.2) su richiesta. Dopo ogni operazione, la vista dell'elenco dovrà rispecchiare le modifiche apportate.}{Alta}
\requisiteboxsimple{UI-4.2}{Visualizzazione per la registrazione di un nuovo prestito}{Vista per l’inserimento dei dati per la registrazione di un nuovo prestito. Il sistema permette l'inserimento delle informazioni necessarie al prestito (DF-1.3), inserendo le informazioni sul nome dell’utente e il titolo del libro che saranno ricercate nell’archivio del sistema (IF-1.4, IF-2.4) e poi fatte presenti come opzioni disponibili di prestito, nonchè della data prevista per la restituzione. Lo stato del nuovo prestito sarà automaticamente impostato come non saldato. Il sistema permette inoltre un interazione per confermare l'operazione di registrazione al termine della compilazione delle informazioni (disponibile solo se le informazioni in input rispettano le precondizioni del requisito BF-1.1)  e un interazione per annullare la registrazione del nuovo prestito. La schermata per la registrazione del prestito viene chiusa al termine dell’operazione. Se la schermata viene chiusa con conferma della modifica da apportare, i dati relativi al nuovo prestito saranno registrati nell’archivio.}{Alta}

\hypertarget{RNF}{\subsubsection{Requisiti Non-Funzionali}}
\requisiteboxsimple{RNF-1.1}{Usabilità della piattaforma}{L’interfaccia grafica deve essere navigabile tramite mouse e tastiera, utilizzando pulsanti e elementi dinamici a schermo.}{Alta}
\requisiteboxsimple{RNF-1.2}{Affidabilità della piattaforma}{Il sistema deve garantire che i dati siano sempre coerenti, impedendo duplicazioni o situazioni non valide come: copie disponibili negative, prestiti associati a utenti inesistenti, cancellazione di dati utilizzati da altre parti del sistema.}{Alta}
%TODO: Decidere se e come implementare la sicurezza e la scalabilità
%\requisiteboxsimple{RNF-1.3}{Sicurezza dei dati}{L’archivio deve essere serializzato in modo non chiaramente leggibile o modificabile da persone.}{Alta}
%\requisiteboxsimple{RNF-1.4}{Scalabilità delle informazioni}{Il sistema deve garantire un funzionamento stabile e le prestazioni non devono degradare in maniera percepibile dall’utente, anche in presenza di carichi elevati di dati. In particolare, deve essere in grado di operare correttamente quando il numero di utenti registrati cresce in modo significativo e quando la quantità di libri presenti nel catalogo aumenta nel tempo.}{Alta}

\input{usecase_form}
\section{Casi d'Uso}
\subsection{Descrizione dei Casi d'Uso}
\vspace{-2em}

% Standardizzatore di formato per il primo caso d'uso (che altrimenti appare sfasato)
\begin{description}[]\item[] \end{description}

\newcounter{ucid}
\renewcommand{\thesubsubsection}{UC-\arabic{subsubsection}:}
\usecase{UC-\stepcounter{ucid}}{Visualizzazione del catalogo dei libri}{Gestore della biblioteca.}{Il sistema contiene un catalogo aggiornato dei libri presenti nella biblioteca.}{Il gestore ha consultato il catalogo dei libri.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il sistema mostra la homepage con accesso al catalogo.
		\item Il gestore seleziona l’opzione per visualizzare il catalogo.
		\item Il sistema mostra il catalogo aggiornato dei libri.
	\end{enumerate}
}{}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Visualizzazione dei prestiti attivi}{Gestore della biblioteca}{I prestiti sono stati registrati correttamente. L’archivio è stato correttamente caricato.}{Le informazioni relative ai prestiti vengono mostrate, evidenziando i prestiti in ritardo.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore della biblioteca seleziona il tasto “Prestiti attivi”.
		\item Il sistema mostra la lista dei prestiti ordinata per data prevista di restituzione.
	\end{enumerate}
}{}

\usecase{UC-3}{Visualizzazione dell’elenco degli utenti}{Gestore della biblioteca}{L’archivio è stato correttamente caricato.}{Le informazioni relative agli utenti vengono mostrate, la lista è ordinata alfabeticamente per cognome e, a parità di cognome, per nome.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item L’utente preme “visualizza utenti”.
		\item Il sistema mostra la lista degli utenti.
	\end{enumerate}
}{}

\usecase{UC-\stepcounter{ucid}}{Registrazione di un nuovo utente}{Gestore della biblioteca}{L’archivio è stato correttamente caricato.}{Se l’operazione ha successo: un nuovo utente è registrato nell’archivio. Se l’operazione fallisce: nessun dato viene modificato.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore segue le procedure per UC-3.
		\item Il gestore preme il pulsante “+”.
		\item Il sistema richiede: nome, cognome, matricola, email istituzionale.
		\item Il gestore inserisce i dati.
		\item Il sistema verifica che la matricola non sia già utilizzata.
		\item Il sistema verifica la validità dell’email.
		\item Il sistema registra il nuovo utente.
		\item Il sistema conferma l’operazione tramite una piccola finestra.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Nuova matricola già presente nell'archivio}
		\item Il sistema rileva che la matricola esiste già.
		\item Il sistema mostra un messaggio di errore.
		\item Il gestore corregge la matricola o annulla l’operazione.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=5A.\arabic*]
		\item[] \textbf{5A - Nuova E-Mail non valida}
		\item Il sistema segnala email non conforme.
		\item Il gestore corregge l'e-mail o annulla l’operazione.
	\end{enumerate}
}

\usecase{UC-\stepcounter{ucid}}{Modifica dei dati di un utente}{Gestore della biblioteca}{L’archivio è stato correttamente caricato.}{Se valida: l’utente è aggiornato. In caso di errore: nessuna modifica applicata.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Si svolge il flusso del caso d’uso UC-3.
		\item Il gestore ricerca l’utente.
		\item Il gestore seleziona il campo dell’utente che vuole modificare.
		\item Il gestore sovrascrive i nuovi dati nel campo.
		\item Il sistema verifica unicità di matricola ed email.
		\item Il sistema salva le modifiche.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Nuova matricola già presente nell'archivio}
		\item Il sistema rileva che la matricola esiste già.
		\item Il sistema mostra un messaggio di errore.
		\item Il gestore corregge la matricola o annulla l’operazione.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=5A.\arabic*]
		\item[] \textbf{5A - Nuova E-Mail non valida}
		\item Il sistema segnala email non conforme.
		\item Il gestore corregge l'e-mail o annulla l’operazione.
	\end{enumerate}
}

\usecase{UC-\stepcounter{ucid}}{Rimozione di un utente}{Gestore della biblioteca}{L’archivio è stato correttamente caricato.}{L’utente viene rimosso dall'archivio.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Si svolge il flusso del caso d’uso UC-3.
		\item Il gestore seleziona un utente.
		\item Clicca su “Elimina”.
		\item Il sistema verifica l’assenza di prestiti attivi.
		\item Il sistema elimina l’utente.
		\item Conferma dell’operazione.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=2A.\arabic*]
		\item[] \textbf{2A - L'utente possiede prestiti attivi}
		\item Il sistema disabilita il pulsante elimina.
	\end{enumerate}
}

\usecase{UC-\stepcounter{ucid}}{Registrazione di un prestito}{Gestore della biblioteca}{L’utente esiste. Il libro esiste e ha almeno 1 copia disponibile. L’utente ha meno di 3 prestiti attivi.}{Prestito registrato. Copie disponibili del libro prestato decrementate.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Si svolge il flusso del caso d’uso UC-2.
		\item Il gestore seleziona l'opzione per aggiungere un prestito.
		\item Il gestore cerca l’utente a carico del prestito e libro da prestare e li seleziona tra quelli suggeriti dall’interfaccia.
		\item Il gestore inserisce la data di restituzione prevista per il prestito.
		\item Il sistema verifica disponibilità di copie del libro in prestito e il limite di prestiti dell’utente.
		\item Il gestore seleziona l'opzione per confermare l'operazione.
		\item Il prestito viene registrato nell'archivio del sistema.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=5A.\arabic*]
		\item[] \textbf{5A - Limite di prestiti raggiunto, con correzione}
		\item Se l'utente ha già 3 prestiti attivi oppure non ci sono copie disponibili, il sistema non permette al gestore di confermare l'operazione.
		\item Il gestore corregge i dati inseriti.
		\item Il flusso riprende dal passo 6.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=5A.\arabic*]
		\item[] \textbf{5B - Limite di prestiti raggiunto, senza correzione}
		\item Se l'utente ha già 3 prestiti attivi oppure non ci sono copie disponibili, il sistema non permette al gestore di confermare l'operazione.
		\item Il gestore annulla l'operazione.
		\item Il prestito non viene registrato nell'archivio del sistema.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=6A.\arabic*]
		\item[] \textbf{6A - Annullamento dell'operazione}
		\item Il gestore annulla l'operazione.
		\item Il prestito non viene registrato nell'archivio del sistema.
	\end{enumerate}
}

\usecase{UC-\stepcounter{ucid}}{Restituzione di un libro}{Gestore della biblioteca}{Il prestito è correttamente registrato nel sistema.}{Il restito è segnato come saldato. Il numero di copie disponibili del libro restituito è incrementato.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Si svolge il flusso del caso d’uso UC-2.
		\item Il gestore seleziona il prestito da saldare dall'elenco.
		\item Il gestore interagisce con l'opzione per confermare la restituzione del libro.
		\item Il prestito viene segnato come saldato.
		\item Il sistema aggiorna il numero di copie del libro restituito.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=3A.\arabic*]
		\item[] \textbf{3A - Annullamento dell'operazione}
		\item Il gestore deseleziona il prestito da saldare.
		\item Il prestito non viene segnato come saldato.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Ricerca di un libro}{Gestore della biblioteca}{L’archivio è stato correttamente caricato.}{Viene mostrato l’elenco filtrato.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Si svolge il flusso del caso d’uso UC-1.
		\item Il gestore inserisce i campi di titolo, autore o ISBN nel form per la ricerca.
		\item Il gestore interagisce con l'opzione per filtrare i risultati a seconda dei campi inseriti.
		\item Il sistema mostra nell'elenco solo i libri che corrispondono ai criteri di ricerca.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=3A.\arabic*]
		\item[] \textbf{3A - Annullamento dell'operazione}
		\item Il gestore non interagisce con l'opzione per filtrare i risultati.
		\item L'elenco dei libri non viene aggiornato a seconda dei criteri di filtro.
	\end{enumerate}

	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Nessun libro con i filtri specificati viene trovato}
		\item Il sistema mostra un'elenco vuoto.
	\end{enumerate}
}

\usecase{UC-\stepcounter{ucid}}{Inserimento di un nuovo libro}{Gestore della biblioteca}{L’archivio è stato correttamente caricato in memoria.}{Il nuovo libro è registrato nell’archivio.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Si svolge il flusso del caso d’uso UC-1.
		\item Il gestore interagisce con l'opzione di aggiunta di un nuovo libro.
		\item Il sistema mostra al gestore la visualizzazione del form di registrazione per un nuovo libro.
		\item Il gestore inserisce nei campi idonei titolo, lista di autori, data di pubblicazione, ISBN e numero copie disponibili nella biblioteca.
		\item Il sistema verifica l’unicità dell’ISBN nell'archivio.
		\item Il gestore interagisce con l'opzione per confermare l'operazione.
		\item Il sistema registra il libro e conferma l’inserimento.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=5A.\arabic*]
		\item[] \textbf{5A - Nuovo ISBN già presente nell'archivio}
		\item Il sistema rileva che l'ISBN inserito è già presente nell'archivio.
		\item Il sistema disabilita l'opzione di conferma dell'operazione di aggiunta.
		\item Il gestore corregge l'ISBN.
		\item Il flusso riprende dal passo 6.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=6A.\arabic*]
		\item[] \textbf{6A - Annullamento dell'operazione}
		\item Il gestore decide di non confermare l'operazione e interagisce con l'opzione di annullamento.
		\item Il sistema non registra la registrazione del nuovo libro.
	\end{enumerate}
}

\usecase{UC-\stepcounter{ucid}}{Modifica dei dati di un libro}{Gestore della biblioteca}{Il libro è registrato nell'archivio.}{I dati sul libro sono correttamente aggiornati.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Si svolge il flusso del caso d’uso UC-1.
		\item Il gestore individua il libro da moodificare nell'elenco.
		\item Il gestore seleziona il campo del libro da modificare.
		\item Il gestore sovrascrive il campo con il nuovo dato.
		\item Il sistema verifica la validità dei dati inseriti.
		\item Il sistema salva le modifiche.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Dati inseriti non rispettano la coerenza dell'archivio}
		\item Il sistema rileva che i dati modificati non rispettano i requisiti di coerenza o formattazione definiti per l'archivio.
		\item Il sistema rifiuta la modifica e il dato resta invariato.
	\end{enumerate}
}

\usecase{UC-\stepcounter{ucid}}{Eliminazione di un libro dal catalogo}{Gestore della biblioteca}{Il libro è presente nel sistema}{Il libro viene rimosso.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Si svolge il flusso del caso d’uso UC-1.
		\item Il gestore seleziona il libro da rimuovere.
		\item Il gestore interagisce con l'opzione di rimozione dell'interfaccia.
		\item Il sistema controlla che il libro non sia associato a prestiti attivi.
		\item Il libro viene rimosso dall'archivio.
		\item L’elenco dei libri viene aggiornato.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Libro attualmente in prestito}
		\item Il sistema non permette l'operazione di rimozione del libro.
		\item Il gestore ricomincerà il flusso di rimozione.
	\end{enumerate}
}

\subsection{Diagramma UML dei Casi d'Uso}
\begin{center}
	\includesvg[width=0.75\textwidth, inkscapelatex=false]{../uml/usecases.svg}
\end{center}

\end{document}
