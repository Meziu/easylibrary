\documentclass[a4paper, 12pt]{article}
\usepackage[italian]{babel}
\usepackage[table]{xcolor}
\usepackage{xstring, xltabular, multirow, ifthen, hyphenat, svg, tcolorbox, enumitem, adjustbox}
\usepackage[
	colorlinks = true,
	linkcolor=black,
	urlcolor=black,
	citecolor=black
]{hyperref}

\hypersetup{linkcolor=black}

% Titolo del documento e informazioni sul lavoro
\title{
    \Large EasyLibrary\\
    \vspace{1mm}
    \Huge Specifica dei Requisiti del Software
}
% Metodo per centrare correttamente con wrapping i nomi.
\author{
    \textbf{Gruppo 18}\\
    Francesco Cangianiello\\
    Andrea Ciliberti\\
    Serena Giannitti\\
    Marco Giraulo
}

\begin{document}

\maketitle

\newpage
\tableofcontents

\newpage
\section{Requisiti di Progetto}
\subsection{Lista dei Requisiti}

% Scope della tabella dei requisiti
{
	\input{requisites_table}
}

\newpage

\input{requisites_form}

\subsection{Specifica dei Requisiti}
\hypertarget{IF}{\subsubsection{Funzionalità individuali}}
\requisitebox{IF-1.1}{Registrazione di un nuovo utente}{Il sistema permette la registrazione di un nuovo utente tramite inserimento dei seguenti dati obbligatori: nome, cognome, matricola ed e-mail istituzionale, tuttavia la matricola o l'indirizzo e-mail non possono essere dei duplicare di valori già associati ad altri utenti nel sistema.}{Nome, cognome, matricola, e-mail istituzionale}{Nessuno.}{Il sistema completa l'avvio. Le informazioni     
\\sull’utente devono corrispondere alle specifiche del requisito DF-1.1.}{Il nuovo utente viene aggiunto all’elenco degli utenti registrati ed è disponibile per il salvataggio.}{Alta}
\requisitebox{IF-1.2}{Modifica dei dati di un utente}{Il sistema permette di modificare le generalità fornite dall’utente. Tutte le generalità possono essere modificate (campi DF-1.1 eccetto i prestiti attivi), se le nuove generalità non sono validi (come matricola o email non univoci) il campo non viene modificato bensì torna al valore iniziale.}{Nuovi valori dei campi dell'utente.}{Nessuno.}{Il sistema completa l'avvio.}{L'utente selezionato viene aggiornato, e le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{IF-1.3}{Rimozione di un utente}{Il sistema permette la cancellazione di un utente registrato, purché non abbia prestiti attivi associati al proprio profilo. Se invece l’utente possiede uno o più prestiti attivi, il sistema impedirà la cancellazione.}{Matricola associata all’utente da rimuovere.}{Nessuno.}{Il sistema completa l'avvio. \\Il profilo dell’utente è presente nel sistema.}{L'utente selezionato è rimosso dall'archivio, e le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{IF-1.4}{Ricerca di utenti}{Il sistema permette la ricerca di utenti tramite 2 modalità: per cognome o per matricola. Il sistema restituisce tutti gli utenti che soddisfano il criterio di ricerca. Se non esistono nell’archivio del sistema utenti che corrispondono ai criteri di ricerca, sarà restituita una lista vuota di utenti.}{Criteri di ricerca (cognome, matricola).}{Utenti corrispondenti ai criteri di ricerca.}{Il sistema completa l'avvio.\\ Il criterio di ricerca è valido.}{Nessuna.}{Media}
\requisitebox{IF-2.1}{Inserimento di un nuovo libro}{Il sistema permette di aggiungere un nuovo libro all’archivio, inserendo i seguenti campi per la sua rappresentazione (DF-1.2). L’inserimento deve essere possibile solo se l’ISBN non è già presente nel sistema e se il numero di copie disponibili non è inferiore a zero.}{Titolo, autore (nome e cognome), anno di pubblicazione, codice identificativo (ISBN), numero di copie disponibili.}{Nessuno.}{Il sistema completa l'avvio.}{Il libro è aggiunto all’archivio ed è disponibile  prestito e il salvataggio.}{Alta}
\requisitebox{IF-2.2}{Modifica dei dati relativi ad un libro}{Il sistema permette di modificare i dati relativi ad un libro nel sistema. Si possono modificare le informazioni di: titolo, autore, anno di pubblicazione, ISBN e numero di copie disponibili. Le modifiche devono mantenere la coerenza dei dati, per cui l’ISBN non può presentare duplicati nell'archivio del sistema, e il numero di copie disponibili non può essere inferiore a zero.}{Nuovi dati relativi al libro (DF-1.2).}{Nessuno.}{Il sistema completa l'avvio. Il libro è presente nel sistema.}{I dati del libro risultano aggiornati secondo le modifiche specificate, e le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{IF-2.3}{Rimozione di un libro}{Il sistema deve permettere di eliminare un libro dall’archivio, ma solo se non esistono prestiti attivi associati a quel titolo. In caso contrario, il sistema impedirà la cancellazione.}{Dati relativi al libro presente nel sistema.}{Nessuno.}{Il sistema completa l'avvio. Il libro deve essere presente nell’archivio del sistema.}{Il libro è rimosso dall'archivio, e le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{IF-2.4}{Ricerca di libri}{Il gestore deve poter cercare libri secondo tre modalità:\vspace{-8pt}
	\begin{itemize}
		\renewcommand{\labelitemi}{-}
		\setlength\itemsep{-0.1cm}
		\item{per titolo}
		\item{per autore}
		\item{per ISBN (codice univoco)}
	\end{itemize}
	 \vspace{-8pt} il sistema deve restituire tutti i libri che soddisfano il criterio di ricerca. Se non esistono nell’archivio del sistema libri che corrispondono ai criteri di ricerca, sarà restituita una lista vuota di libri.}{Criterio di ricerca (Titolo, autore o ISBN del libro).}{Elenco dei libri corrispondenti ai criteri della ricerca.}{Il criterio di ricerca è valido.}{Nessuna.}{Media}
\requisitebox{IF-3.1}{Raccolta dello storico dei prestiti}{Il gestore deve poter ottenere e operare sull'elenco dei prestiti attivi e restituiti.}{Nessuno.}{Elenco completo di tutti i prestiti (attivi e restituiti) presenti nell'archivio del sistema.}{Il sistema completa l'avvio.}{Nessuna.}{Media}

\hypertarget{BF}{\subsubsection{Business Flow}}
\requisitebox{BF-1.1}{Registrazione di un nuovo prestito}{Il gestore registra il prestito di un libro da parte di un utente. Un prestito può essere registrato solo se: \vspace{-6pt}
	\begin{itemize}
 	    \renewcommand{\labelitemi}{-}
   		\setlength\itemsep{-0.1cm}
		\item{il libro ha almeno una copia disponibile;}
		\item{l’utente ha meno di tre prestiti attivi.}
	\end{itemize}
	\vspace{-6pt} Se una o più delle condizioni sopra indicate non risultano soddisfatte, il gestore sarà notificato di quali condizioni non siano rispettate e non potrà confermare l’operazione. Al termine della registrazione, il sistema deve decrementare il numero di copie disponibili del libro e inserire le informazioni del prestito nell’archivio (DF-1.3). \\È possibile per un utente prendere in prestito più di una singola copia del medesimo libro.}{Dati relativi all’utente e ai libri di cui si vuole effettuare il prestito.}{Nessuno.}{L’utente è correttamente registrato nel sistema. \\Il libro da prestare è correttamente registrato nel sistema. \\L’utente richiede il prestito di un nuovo libro.}{Il numero di copie disponibili del libro è \\decrementato. Il prestito viene aggiunto alla lista dei prestiti attivi dell’utente. Le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}
\requisitebox{BF-1.2}{Restituzione di un libro}{Il gestore registra la restituzione di un libro da parte di un utente. Il gestore ricerca il prestito corrispondente all’interno del sistema e lo segna come restituito. Se tale prestito era già contrassegnato come restituito, il sistema non compierà operazioni aggiuntive. Altrimenti, il sistema segna come disponibile la copia del libro.}{Dati del libro da restituire e dell’utente che effettua la restituzione.}{Nessuno.}{Il prestito deve essere attivo.}{Il prestito viene segnalato come restituito. La copia del libro viene resa disponibile per nuovi prestiti. Le modifiche sono riflesse nell’archivio e rese disponibili per il salvataggio (DF-2.1).}{Alta}

\hypertarget{DF}{\subsubsection{Esigenze Dati}}
\requisiteboxsimple{DF-1.1}{Informazioni sull’utente}{Un utente deve essere rappresentato tramite i seguenti dati: nome, cognome, matricola univoca (stringa di 10 cifre numeriche), e-mail istituzionale univoca (formattata per standard RFC 5322, terminante nel campo di dominio con “studenti.unisa.it”), lista di prestiti (DF-1.3) attualemente attivi a carico dell’utente, che non possono essere più di 3.}{Alta}
\requisiteboxsimple{DF-1.2}{Informazioni sul libro}{Un libro deve essere rappresentato tramite i seguenti dati: titolo, lista di autori (con ognuno campo di nome e di cognome), data di pubblicazione (precedente o corrispondente alla data attuale, composta dai campi di giorno, mese ed anno), codice identificativo univoco ISBN (per standard ISO 2108) e numero di copie disponibili nell’archivio (non negative).}{Alta}
\requisiteboxsimple{DF-1.3}{Informazioni sul prestito}{Un prestito è rappresentato tramite le informazioni di utente a carico (DF-1.1), di libro preso in prestito (DF-1.2), di data prevista di restituzione del prestito, e di un indicatore che ne indica lo stato tra "attivo" o "restituito".}{Alta}
\requisitebox{DF-2.1}{Salvataggio dei dati dell’archivio su file}{Ogni componente dell’archivio (libri, utenti, prestiti) deve essere salvato su un file locale univocamente associato. Il salvataggio deve avvenire:\vspace{-6pt} 
	\begin{itemize}
 	    \renewcommand{\labelitemi}{-}
		\setlength\itemsep{-0.1mm}
		\item{Su richiesta dell’utente.}
		\item{Automaticamente alla chiusura dell’applicazione.}
	\end{itemize}\vspace{-20pt} \phantom{X} }{Dati di archivio da salvare (quali l’insieme di studenti, libri e prestiti annessi). I nomi dei file su cui devono essere salvati.}{File su sistema contenente i dati relativi all’archivio (archivio di utenti, libri e prestiti). Il modo in cui sono archiviati i file dipende dal requisito RNF-2.2.}{Nessuno.}{Nessuno.}{Alta}
\requisitebox{DF-2.2}{Caricamento da file dell’archivio}{Il sistema carica nelle proprie collezioni corrispondenti i libri, utenti e i prestiti presenti nei file di appoggio secondo la \\serializzazione utilizzata (RNF-2.2).}{Nomi dei file da cui caricare l’archivio.}{Strutture dati dell’archivio.}{File di appoggio presenti e coerenti.}{La memoria del sistema è popolata dalle informazioni presenti nel file di appoggio.}{Alta}

\newpage
\hypertarget{UI}{\subsubsection{Interfaccia Utente}}
\requisiteboxsimple{UI-1.1}{Menù principale dell’applicativo}{Landing page con menù di opzioni per accedere alle\\diverse funzionalità del sistema, aperto di default all’avvio del\\programma grafico. Il menù mostra il nome del sistema e i diversi collegamenti per permettere al gestore di visualizzare i vari elenchi di informazioni, quali uno per visualizzare la lista degli utenti (UI-2.1), dei libri (UI-3.1), e dei prestiti attivi (UI-4.1).}{Alta}
\requisiteboxsimple{UI-1.2}{Menu Bar persistente}{Barra di menù persistente nella vista principale del programma. Contiene interazioni per:\vspace{-8pt} 
	\begin{itemize}
		\renewcommand{\labelitemi}{-}
		\setlength\itemsep{0.1mm}
		\item{Salvare lo stato dell’archivio (nei file utilizzati correntemente, DF-2.1).}
		\item{Caricare l’archivio da un file specifico (DF-2.1).}
		\item{Esportare l’archivio in un insieme di file specifico (DF-2.2).}
		\item{Uscire dal programma.}
	\end{itemize}\vspace{-8pt} 
	L’interfaccia dell’applicativo viene aggiornata in base all'interazione scelta.
	%Per ciascuna interazione, l’interfaccia dell’applicativo viene\\aggiornata in base ai dati presenti in memoria
}{Media}
\requisiteboxsimple{UI-2.1}{Visualizzazione dell’elenco degli utenti}{Elenco grafico degli utenti registrati nell’archivio della biblioteca. La vista mostra le informazioni sugli utenti registrati\\nell’archivio della biblioteca includendo le loro informazioni (DF-1.1), \\ordinati alfabeticamente per cognome e, a parità di cognome, per nome, in una tabella, eccetto per la lista di libri attualmente in prestito per ogni utente che sarà mostrata non direttamente ma tramite un \\collegamento con cui interagire. Il sistema permette di modificare le informazioni relative all’utente direttamente dall'interfaccia,\\interagendo con la visualizzazione dei dati (IF-1.2). Il sistema \\permette di filtrare la lista degli utenti tramite campi di cognome e \\matricola su richiesta (IF-1.4). Il sistema permette di aggiungere utenti alla lista (UI-2.2) e di rimuovere l’utente selezionato (IF-1.3) su \\richiesta. Dopo ogni operazione, la vista dell'elenco dovrà rispecchiare le modifiche apportate.}{Alta}
\requisiteboxsimple{UI-2.2}{Visualizzazione per la registrazione di un nuovo utente}{Vista per l’inserimento dei dati per la registrazione di un nuovo utente. Il sistema permette l'inserimento delle informazioni necessarie (DF-1.1, eccetto la lista di libri in prestito), un interazione per confermare l'operazione di registrazione al termine della\\compilazione delle informazioni (disponibile solo se le informazioni fornite in input rispettano le precondizioni del requisito IF-1.1) e un interazione per annullare la registrazione del nuovo utente. La schermata per l'inserimento dell’utente viene chiusa al termine dell’operazione. Se la schermata viene chiusa con conferma della modifica da apportare, i dati relativi al nuovo utente saranno registrati nell’archivio.}{Alta}
\requisiteboxsimple{UI-3.1}{Visualizzazione dell’elenco dei libri}{Elenco grafico dei libri presenti nell’archivio della\\biblioteca. La vista mostra le informazioni sui libri presenti\\nell’archivio della biblioteca includendo le loro informazioni (DF-1.2), ordinati alfabeticamente per titolo, in una tabella.Il sistema permette di modificare le informazioni relative al libro direttamente dall'interfaccia utente,interagendo con la visualizzazione dei dati (IF-2.2). Il sistema permette di filtrare la lista dei libri tramite campi di titolo, autore e codice ISBN su richiesta (IF-2.4). Il sistema permette di aggiungere libri alla lista (UI-3.2), e di rimuovere il libro selezionato (IF-2.3) su richiesta. Dopo ogni operazione, la vista dell'elenco dovrà rispecchiare le modifiche apportate.}{Alta}
\requisiteboxsimple{UI-3.2}{Visualizzazione per la registrazione di un nuovo libro}{Vista per l’inserimento dei dati per la registrazione di un nuovo libro. Il sistema permette l'inserimento delle informazioni necessarie (DF-1.2), un interazione per confermare l'operazione di registrazione al termine della compilazione delle informazioni (disponibile solo se le informazioni in input rispettano le precondizioni del requisito IF-2.1) e un interazione per annullare la registrazione del nuovo libro. La schermata per l'inserimento del libro viene chiusa al termine dell’operazione. Se la schermata viene chiusa con conferma della modifica da apportare, i dati relativi al nuovo libro saranno registrati nell’archivio.}{Alta}
\requisiteboxsimple{UI-4.1}{Visualizzazione dei prestiti attivi}{Elenco grafico dei prestiti attivi registrati nell’archivio della biblioteca. La vista mostra le informazioni sui prestiti registrati nell’archivio della biblioteca, includendo le loro informazioni (DF-1.3), ordinati in ordine crescente per data prevista di restituzione, in una tabella. Il sistema evidenzierà i prestiti attivi la cui data prevista di restituzione è precendente alla data di visualizzazione. Il sistema permette di filtrare la lista dei prestiti per visualizzare solo i prestiti attivi o anche quelli restituitiati. Il sistema permette di registrare un nuovo prestito (UI-4.2), e di segnare come restituito il prestito selezionato (BF-1.2) su richiesta. Dopo ogni operazione, la vista dell'elenco dovrà rispecchiare le modifiche apportate.}{Alta}
\requisiteboxsimple{UI-4.2}{Visualizzazione per la registrazione di un nuovo prestito}{Vista per l’inserimento dei dati per la registrazione di un nuovo prestito. Il sistema permette l'inserimento delle informazioni necessarie al prestito (DF-1.3), inserendo le informazioni sul nome dell’utente e il titolo del libro che saranno ricercate nell’archivio del sistema (IF-1.4, IF-2.4) e poi fatte presenti come opzioni disponibili di prestito, nonchè della data prevista per la restituzione. Lo stato del nuovo prestito sarà automaticamente impostato come attivo. Il sistema permette un interazione per mostrare la vista dello storico completo dei prestiti (per requisito 4.3). Il sistema permette inoltre un interazione per confermare l'operazione di registrazione al termine della compilazione delle informazioni (disponibile solo se le informazioni in input rispettano le precondizioni del requisito BF-1.1) e un interazione per annullare la registrazione del nuovo prestito. La schermata per la registrazione del prestito viene chiusa al termine dell’operazione. Se la schermata viene chiusa con conferma della modifica da apportare, i dati relativi al nuovo prestito saranno registrati nell’archivio.}{Alta}
\requisiteboxsimple{UI-4.3}{Visualizzazione dello storico dei prestiti}{Elenco grafico di tutti i prestiti, attivi e restituiti,\\registrati nell’archivio della biblioteca (IF-3.1). La visualizzazione si configura come per requisito UI-4.1, con la differenza che mostra nell'elenco grafico, oltre ai prestiti segnati come "attivi", anche i prestiti segnati come "restituiti". Il sistema permette di aggiungere nuovi prestiti e operare sui prestiti esistenti come per requisito UI-4.1.}{Bassa}

\hypertarget{RNF}{\subsubsection{Requisiti Non-Funzionali}}
\requisiteboxsimple{RNF-1.1}{Usabilità della piattaforma}{L’interfaccia grafica deve essere navigabile tramite mouse e tastiera, utilizzando pulsanti e elementi dinamici a schermo.}{Media}
\requisiteboxsimple{RNF-1.2}{Affidabilità della piattaforma}{Il sistema deve garantire che i dati siano sempre coerenti, impedendo duplicazioni o situazioni non valide come: copie disponibili negative, prestiti associati a utenti inesistenti, cancellazione di dati utilizzati da altre parti del sistema.}{Alta}
%TODO: Decidere se e come implementare la sicurezza e la scalabilità
%\requisiteboxsimple{RNF-1.3}{Sicurezza dei dati}{L’archivio deve essere serializzato in modo non chiaramente leggibile o modificabile da persone.}{Alta}
%\requisiteboxsimple{RNF-1.4}{Scalabilità delle informazioni}{Il sistema deve garantire un funzionamento stabile e le prestazioni non devono degradare in maniera percepibile dall’utente, anche in presenza di carichi elevati di dati. In particolare, deve essere in grado di operare correttamente quando il numero di utenti registrati cresce in modo significativo e quando la quantità di libri presenti nel catalogo aumenta nel tempo.}{Alta}

\newpage
\input{usecase_form}
\section{Casi d'Uso}
\subsection{Descrizione dei Casi d'Uso}
\vspace{-2em}

% Standardizzatore di formato per il primo caso d'uso (che altrimenti appare sfasato)
\begin{description}[]\item[] \end{description}

\newcounter{ucid}
\renewcommand{\thesubsubsection}{UC-\arabic{subsubsection}:}

\usecase{UC-\stepcounter{ucid}}{Visualizzazione della home page}{Gestore della biblioteca.}{Il gestore avvia il sistema.}{L’home page viene visualizzata correttamente.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il sistema completa l’avvio.
		\item Il sistema mostra la visualizzazione dell’home page al gestore.
		\item Il sistema carica correttamente l’archivio delle informazioni salvato in una precedente sessione.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=3A.\arabic*]
		\item[] \textbf{3A - L’archivio non è caricato correttamente}
		\item Il sistema mostra un messaggio di errore nella homepage.
		\item Il sistema genera un nuovo archivio vuoto da utilizzare.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Visualizzazione del catalogo dei libri}{Gestore della biblioteca.}{Il gestore sta visualizzando l'home page.}{Il gestore ha consultato il catalogo dei libri.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore interagisce con l'opzione per visualizzare il catalogo.
		\item Il sistema mostra il catalogo aggiornato dei libri ordinato per titolo.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=2A.\arabic*]
		\item[] \textbf{2A - Il gestore decide di ritornare alla home page}
		\item Il gestore seleziona l’opzione per tornare alla home page.
		\item Il sistema mostra la visualizzazione della home page come per requisito UC-1.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Visualizzazione dei prestiti attivi}{Gestore della biblioteca}{Il gestore sta visualizzando l'home page.}{Le informazioni relative ai prestiti attivi vengono mostrate, evidenziando i prestiti in ritardo, in un elenco ordinato per data prevista di restituzione.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore interagisce con l’opzione per visualizzare i prestiti attivi.
		\item Il sistema mostra la lista dei prestiti attivi ordinata per data prevista di restituzione.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=2A.\arabic*]
		\item[] \textbf{2A - Il gestore decide di ritornare alla home page}
		\item Il gestore seleziona l’opzione per tornare alla home page.
		\item Il sistema mostra la visualizzazione della home page come per requisito UC-1.
	\end{enumerate}
}

\newpage

\usecase{UC-\stepcounter{ucid}}{Visualizzazione dello storico dei prestiti}{Gestore della biblioteca}{Il gestore sta visualizzando la sezione relativa ai prestiti attivi.}{Le informazioni relative a tutti i prestiti vengono mostrate,\\evidenziando i prestiti in ritardo, in un elenco ordinato per data\\prevista di restituzione.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore interagisce con l'opzione per visualizzare anche i prestiti restituititi.
		\item Il sistema mostra la lista dei prestiti ordinata per data prevista di restituzione.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=2A.\arabic*]
		\item[] \textbf{2A - Il gestore decide di ritornare alla home page}
		\item Il gestore seleziona l’opzione per tornare alla home page.
		\item Il sistema mostra la visualizzazione della home page come per requisito UC-1.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Visualizzazione dell’elenco degli utenti}{Gestore della biblioteca}{Il gestore sta visualizzando l'home page.}{Viene mostrato l’elenco degli utenti ordinato alfabeticamente per\\cognome e, a parità di cognome, per nome.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore seleziona l’opzione per visualizzare l’elenco degli utenti.
		\item Il sistema mostra la lista degli utenti ordinata.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=2A.\arabic*]
		\item[] \textbf{2A - Il gestore decide di ritornare alla home page}
		\item Il gestore seleziona l’opzione per tornare alla home page.
		\item Il sistema mostra la visualizzazione della home page come per requisito UC-1.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Registrazione di un nuovo utente}{Gestore della biblioteca}{Il gestore sta visualizzando l’elenco degli utenti.}{Il nuovo utente è registrato nell’archivio.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore interagisce con l’opzione per registrare un nuovo utente.
		\item Il sistema mostra al gestore la visualizzazione del form di\\registrazione per un nuovo utente.
		\item Il gestore inserisce i dati di nome, cognome, matricola ed email istituzionale del nuovo utente.
		\item Il sistema verifica che la matricola non sia già utilizzata.
		\item Il sistema verifica la validità dell’email.
		\item Il gestore interagisce con l’opzione di conferma dell’operazione.
		\item Il sistema registra il nuovo utente.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Matricola duplicata, con correzione}
		\item Il sistema rileva che la matricola inserita è già presente \\nell'archivio.
		\item Il sistema mostra un messaggio di errore.
		\item Il gestore corregge la matricola.
		\item L’esecuzione riprende dal passo 4.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Matricola duplicata, con annullamento}
		\item Il sistema rileva che la matricola inserita è già presente nell'archivio.
		\item Il sistema mostra un messaggio di errore.
		\item L’operatore interagisce con l’opzione per annullare l’operazione.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=5A.\arabic*]
		\item[] \textbf{5A - Email non valida, con correzione}
		\item Il sistema rileva che la e-mail inserita non è valida.
		\item Il sistema mostra un messaggio di errore.
		\item Il gestore corregge la e-mail.
		\item L’esecuzione riprende dal passo 5.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=5A.\arabic*]
		\item[] \textbf{5A - Email non valida, con annullamento}
		\item Il sistema rileva che la e-mail inserita non è valida.
		\item Il sistema mostra un messaggio di errore.
		\item L’operatore interagisce con l’opzione per annullare l’operazione.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Modifica dei dati di un utente}{Gestore della biblioteca}{Il gestore sta visualizzando l'elenco degli utenti.}{Se valida: l’utente è aggiornato.\\In caso di errore: nessuna modifica applicata.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore individua l’utente di cui vuole modificare i dati.
		\item Il gestore seleziona il campo dell’utente che vuole modificare.
		\item Il gestore sovrascrive i dati nel campo con le nuove informazioni.
		\item Il sistema verifica unicità di matricola ed email.
		\item Il sistema salva le modifiche.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Nuova matricola già presente nell'archivio}
		\item Il sistema rileva che la matricola inserita è già presente nell'archivio.
		\item Il sistema annulla la modifica e non modifica i dati nell'archivio.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4B.\arabic*]
		\item[] \textbf{4B - Nuova E-Mail non valida}
		\item Il sistema rileva l'inserimento di una e-mail non conforme.
		\item Il sistema annulla la modifica e non modifica i dati nell'archivio.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Rimozione di un utente}{Gestore della biblioteca}{Il gestore sta visualizzando l'elenco degli utenti.}{L’utente viene rimosso dall'archivio.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore individua e seleziona l'utente da rimuovere.
		\item Il sistema verifica l’assenza di prestiti attivi.
		\item Il gestore interagisce con l'opzione di rimozione dell'utente.
		\item Il sistema rimove l’utente dall'archivio.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=2A.\arabic*]
		\item[] \textbf{2A - L'utente possiede prestiti attivi}
		\item Il sistema disabilita l'opzione di rimozione per quell'utente.
	\end{enumerate}
}

\newpage

\usecase{UC-\stepcounter{ucid}}{Ricerca di utenti}{Gestore della biblioteca}{Il gestore sta visualizzando l'elenco degli utenti.}{Viene mostrato l’elenco filtrato.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore inserisce i campi di cognome o matricola nel form per la ricerca.
		\item Il gestore interagisce con l'opzione per filtrare i risultati a seconda dei campi inseriti.
		\item Il sistema mostra nell'elenco solo gli utenti che corrispondono ai criteri di ricerca.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=2A.\arabic*]
		\item[] \textbf{2A - Annullamento dell'operazione}
		\item Il gestore non interagisce con l'opzione per filtrare i risultati.
		\item L'elenco dei libri non viene aggiornato a seconda dei criteri di filtro.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=3A.\arabic*]
		\item[] \textbf{3A - Nessun utente con i filtri specificati viene trovato}
		\item Il sistema mostra un'elenco vuoto.
	\end{enumerate}
}

\newpage
\usecase{UC-\stepcounter{ucid}}{Registrazione di un prestito}{Gestore della biblioteca}{Il gestore sta visualizzando l'elenco dei prestiti attivi.}{Prestito registrato.\\Copie disponibili del libro prestato decrementate.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore seleziona l'opzione per aggiungere un prestito.
		\item Il gestore cerca l’utente a carico del prestito e il libro da prestare,\\li seleziona tra quelli suggeriti dall’interfaccia.
		\item Il gestore inserisce la data di restituzione prevista per il prestito.
		\item Il sistema verifica disponibilità di copie del libro in prestito e il limite di prestiti dell’utente.
		\item Il gestore seleziona l'opzione per confermare l'operazione.
		\item Il prestito viene registrato nell'archivio del sistema.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Limite di prestiti raggiunto, con correzione}
		\item Se l'utente ha già 3 prestiti attivi, il sistema non permette al gestore di confermare l'operazione.
		\item Il gestore corregge i dati inseriti cambiando l'utente a carico.
		\item Il flusso riprende dal passo 6.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4B.\arabic*]
		\item[] \textbf{4B - Limite di prestiti raggiunto, senza correzione}
		\item Se l'utente ha già 3 prestiti attivi, il sistema non permette al gestore di confermare l'operazione.
		\item Il gestore annulla l'operazione.
		\item Il prestito non viene registrato nell'archivio del sistema.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4C.\arabic*]
		\item[] \textbf{4C - Copie del libro terminate, con correzione}
		\item Se non ci sono copie disponibili del libro da prestare nell'archivio, il sistema non permette al gestore di confermare l'operazione.
		\item Il gestore corregge i dati inseriti cambiando il libro da prestare.
		\item Il flusso riprende dal passo 6.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4D.\arabic*]
		\item[] \textbf{4D - Copie del libro terminate, senza correzione}
		\item Se non ci sono copie disponibili del libro da prestare nell'archivio, il sistema non permette al gestore di confermare l'operazione.
		\item Il gestore annulla l'operazione.
		\item Il prestito non viene registrato nell'archivio del sistema.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=5A.\arabic*]
		\item[] \textbf{5A - Annullamento dell'operazione}
		\item Il gestore annulla l'operazione.
		\item Il prestito non viene registrato nell'archivio del sistema.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Restituzione di un libro}{Gestore della biblioteca}{Il gestore sta visualizzando l'elenco dello storico dei prestiti.}{Il prestito è segnato come restituito. Il numero di copie disponibili del libro restituito è incrementato.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore seleziona il prestito da restituire dall'elenco.
		\item Il gestore interagisce con l'opzione per confermare la restituzione del libro.
		\item Il prestito viene segnato come restituito.
		\item Il sistema aggiorna il numero di copie del libro restituito.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=2A.\arabic*]
		\item[] \textbf{2A - Annullamento dell'operazione}
		\item Il gestore deseleziona il prestito da restituire.
		\item Il sistema non modifica lo stato del prestito.
	\end{enumerate}
}

\usecase{UC-\stepcounter{ucid}}{Ricerca di libri}{Gestore della biblioteca}{Il gestore sta visualizzando l'elenco dei libri.}{Viene mostrato l’elenco filtrato.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore inserisce i campi di titolo, autore o ISBN nel form per la ricerca.
		\item Il gestore interagisce con l'opzione per filtrare i risultati a seconda dei campi inseriti.
		\item Il sistema mostra nell'elenco solo i libri che corrispondono ai criteri di ricerca.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=2A.\arabic*]
		\item[] \textbf{2A - Annullamento dell'operazione}
		\item Il gestore non interagisce con l'opzione per filtrare i risultati.
		\item L'elenco dei libri non viene aggiornato a seconda dei criteri di filtro.
	\end{enumerate}

	\vspace{-0.8\topsep}
	\begin{enumerate}[label=3A.\arabic*]
		\item[] \textbf{3A - Nessun libro con i filtri specificati viene trovato}
		\item Il sistema mostra un'elenco vuoto.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{1cm}

\usecase{UC-\stepcounter{ucid}}{Inserimento di un nuovo libro}{Gestore della biblioteca}{Il gestore sta visualizzando l'elenco dei libri.}{Il nuovo libro è registrato nell’archivio.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore interagisce con l'opzione di aggiunta di un nuovo libro.
		\item Il sistema mostra al gestore la visualizzazione del form di\\registrazione per un nuovo libro.
		\item Il gestore inserisce nei campi idonei titolo, lista di autori, data di pubblicazione, ISBN e numero copie disponibili nella biblioteca.
		\item Il sistema verifica l’unicità dell’ISBN nell'archivio.
		\item Il gestore interagisce con l'opzione per confermare l'operazione.
		\item Il sistema registra il libro e conferma l’inserimento.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Nuovo ISBN già presente nell'archivio}
		\item Il sistema rileva che l'ISBN inserito è già presente nell'archivio.
		\item Il sistema disabilita l'opzione di conferma dell'operazione di aggiunta.
		\item Il gestore corregge l'ISBN.
		\item Il flusso riprende dal passo 6.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=5A.\arabic*]
		\item[] \textbf{5A - Annullamento dell'operazione}
		\item Il gestore decide di non confermare l'operazione e interagisce con l'opzione di annullamento.
		\item Il sistema non registra la registrazione del nuovo libro.
	\end{enumerate}
}

\newpage
\usecase{UC-\stepcounter{ucid}}{Modifica dei dati di un libro}{Gestore della biblioteca}{Il gestore sta visualizzando l'elenco dei libri.}{I dati sul libro sono correttamente aggiornati.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore individua il libro da modificare nell'elenco.
		\item Il gestore seleziona il campo del libro da modificare.
		\item Il gestore sovrascrive il campo con il nuovo dato.
		\item Il sistema verifica la validità dei dati inseriti.
		\item Il sistema salva le modifiche.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=3A.\arabic*]
		\item[] \textbf{3A - Dati inseriti non rispettano la coerenza dell'archivio}
		\item Il sistema rileva che i dati modificati non rispettano i requisiti di coerenza o formattazione definiti per l'archivio.
		\item Il sistema rifiuta la modifica e il dato resta invariato.
	\end{enumerate}
}

\newpage
\usecase{UC-\stepcounter{ucid}}{Rimozione di un libro dal catalogo}{Gestore della biblioteca}{Il gestore sta visualizzando l'elenco dei libri.}{Il libro viene rimosso.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore seleziona il libro da rimuovere.
		\item Il gestore interagisce con l'opzione di rimozione dell'interfaccia.
		\item Il sistema controlla che il libro non sia associato a prestiti attivi.
		\item Il libro viene rimosso dall'archivio.
		\item L’elenco dei libri viene aggiornato.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=3A.\arabic*]
		\item[] \textbf{3A - Libro attualmente in prestito}
		\item Il sistema non permette l'operazione di rimozione del libro.
		\item Il gestore ricomincerà il flusso di rimozione.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Salvataggio dell'archivio su file}{Gestore della biblioteca.}{Il gestore ha visualizzato l'home page e l'archivio è stato correttamente popolato.}{I file di appoggio specificati sono riempiti delle informazioni \\dell'archivio}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore interagisce con l'opzione per salvare l'archivio su file.
		\item Il gestore indica al sistema su quali file salvare l'archivio.
		\item Il sistema controlla che sia possibile accedere e scrivere sui file specificati.
		\item Il sistema scrive sui file i dati dell'archivio.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=3A.\arabic*]
		\item[] \textbf{3A - Errore di input/output sul filesystem}
		\item Il sistema rileva l'impossibilità a salvare i dati sui file specificati.
		\item Il sistema mostra un messaggio di errore e annulla l'operazione.
	\end{enumerate}
}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

\usecase{UC-\stepcounter{ucid}}{Caricamento dell'archivio da file}{Gestore della biblioteca.}{Il gestore ha visualizzato l'home page.}{L'archivio è popolato dalle informazioni presenti nei file di appoggio.}{
	\vspace{-0.8\topsep}
	\begin{enumerate}
		\item Il gestore interagisce con l'opzione per caricare l'archivio da file.
		\item Il gestore indica al sistema da quali file caricare l'archivio.
		\item Il sistema controlla che sia possibile accedere e leggere dai file specificati.
		\item Il sistema popola l'archivio con i dati letti dai file, sovrascrivendo i dati precedentemente memorizzati.
	\end{enumerate}
}{
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=3A.\arabic*]
		\item[] \textbf{3A - Errore di input/output sul filesystem}
		\item Il sistema rileva l'impossibilità a leggere i dati dai file specificati.
		\item Il sistema mostra un messaggio di errore e annulla l'operazione.
	\end{enumerate}
	
	\vspace{-0.8\topsep}
	\begin{enumerate}[label=4A.\arabic*]
		\item[] \textbf{4A - Errore di interpretazione dei dati}
		\item Il sistema rileva che i dati presenti nei file specificati non\\corrispondono ad un corretto archivio del sistema da cui poter estrarre informazioni.
		\item Il sistema mostra un messaggio di errore e annulla l'operazione.
	\end{enumerate}
}

\newpage
\subsection{Diagramma UML dei Casi d'Uso}
\begin{figure}[ht]
\begin{adjustbox}{center, margin=0cm 0cm 0cm 0cm}
	\includesvg[width=1.1\textwidth, inkscapelatex=false]{../uml/usecases.svg}
\end{adjustbox}
\end{figure}

\end{document}

